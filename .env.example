# ConduitLLM Environment Variables
# Copy this file to .env and configure for your environment

# ===========================================
# Core Database Configuration
# ===========================================
DATABASE_URL=postgresql://conduit:conduitpass@postgres:5432/conduitdb
CONDUIT_SKIP_DATABASE_INIT=false

# ===========================================
# Redis Configuration
# ===========================================
# Option 1: Redis URL format (recommended)
REDIS_URL=redis://redis:6379
# Option 2: Legacy connection string format
# CONDUIT_REDIS_CONNECTION_STRING=redis:6379
CONDUIT_REDIS_INSTANCE_NAME=conduit:

# ===========================================
# RabbitMQ Configuration
# ===========================================
CONDUITLLM__RABBITMQ__HOST=rabbitmq
CONDUITLLM__RABBITMQ__PORT=5672
CONDUITLLM__RABBITMQ__USERNAME=conduit
CONDUITLLM__RABBITMQ__PASSWORD=conduitpass
CONDUITLLM__RABBITMQ__VHOST=/
CONDUITLLM__RABBITMQ__PREFETCHCOUNT=10
CONDUITLLM__RABBITMQ__PARTITIONCOUNT=10
CONDUITLLM__RABBITMQ__REQUESTEDHEARTBEAT=60
CONDUITLLM__RABBITMQ__PUBLISHERCONFIRMATION=true
CONDUITLLM__RABBITMQ__CHANNELMAX=50
CONDUITLLM__RABBITMQ__CONCURRENTMESSAGELIMIT=50

# ===========================================
# API-to-API Authentication
# ===========================================
CONDUIT_API_TO_API_BACKEND_AUTH_KEY=your-secure-key-here

# ===========================================
# Service URLs (Internal Docker Network)
# ===========================================
CONDUIT_API_BASE_URL=http://api:8080
CONDUIT_ADMIN_API_BASE_URL=http://admin:8080

# ===========================================
# External Service URLs (For WebUI/Clients)
# ===========================================
CONDUIT_API_EXTERNAL_URL=http://localhost:5000
CONDUIT_ADMIN_API_EXTERNAL_URL=http://localhost:5002

# ===========================================
# Media Storage Configuration
# ===========================================
# Storage provider: InMemory, S3
# Option 1: Use configuration path format
# ConduitLLM__Storage__Provider=S3
# Option 2: Use environment variable format (recommended for dev)
CONDUIT_MEDIA_STORAGE_TYPE=InMemory
CONDUITLLM__MEDIA_BASE_URL=http://localhost:5000

# S3 Configuration (if using S3 provider)
# For development with MinIO:
# CONDUIT_MEDIA_STORAGE_TYPE=S3
# CONDUIT_S3_ENDPOINT=http://minio:9000
# CONDUIT_S3_ACCESS_KEY_ID=conduit
# CONDUIT_S3_SECRET_ACCESS_KEY=conduitpass
# CONDUIT_S3_BUCKET_NAME=conduit-media
# CONDUIT_S3_REGION=us-east-1

# For production with AWS S3:
# CONDUIT_MEDIA_STORAGE_TYPE=S3
# CONDUIT_S3_ENDPOINT=https://s3.amazonaws.com
# CONDUIT_S3_ACCESS_KEY_ID=your-access-key
# CONDUIT_S3_SECRET_ACCESS_KEY=your-secret-key
# CONDUIT_S3_BUCKET_NAME=conduit-media
# CONDUIT_S3_REGION=us-east-1

# For Cloudflare R2:
# CONDUIT_MEDIA_STORAGE_TYPE=S3
# CONDUIT_S3_ENDPOINT=https://YOUR_ACCOUNT_ID.r2.cloudflarestorage.com
# CONDUIT_S3_ACCESS_KEY_ID=your-r2-access-key
# CONDUIT_S3_SECRET_ACCESS_KEY=your-r2-secret-key
# CONDUIT_S3_BUCKET_NAME=conduit-media
# CONDUIT_S3_REGION=auto

# ===========================================
# Performance Tracking
# ===========================================
Conduit__PerformanceTracking__Enabled=true
Conduit__PerformanceTracking__IncludeInResponse=true
Conduit__PerformanceTracking__TrackStreamingMetrics=true

# ===========================================
# Logging Configuration
# ===========================================
Logging__LogLevel__Default=Information
Logging__LogLevel__ConduitLLM=Information
Logging__LogLevel__Microsoft=Warning
Logging__LogLevel__Microsoft.Hosting.Lifetime=Information
Logging__LogLevel__Microsoft.EntityFrameworkCore=Warning

# ===========================================
# CORS Configuration
# ===========================================
AdminApi__AllowedOrigins__0=http://localhost:3000
AdminApi__AllowedOrigins__1=http://localhost:8080

# ===========================================
# Health Monitoring Configuration
# ===========================================
# Check intervals and thresholds
HealthMonitoring__CheckIntervalSeconds=30
HealthMonitoring__ConsecutiveFailureThreshold=3
HealthMonitoring__CpuWarningThreshold=70
HealthMonitoring__CpuCriticalThreshold=90
HealthMonitoring__MemoryWarningThreshold=70
HealthMonitoring__MemoryCriticalThreshold=90

# API endpoint health checks (array format for environment variables)
HealthMonitoring__ApiEndpoints__0__Name=AdminAPI
HealthMonitoring__ApiEndpoints__0__Url=http://admin:8080/health
HealthMonitoring__ApiEndpoints__0__TimeoutMs=5000
HealthMonitoring__ApiEndpoints__0__WarningThresholdMs=1000

# System resource monitoring
HealthMonitoring__SystemResources__CpuWarningThreshold=70
HealthMonitoring__SystemResources__CpuCriticalThreshold=90
HealthMonitoring__SystemResources__MemoryWarningThreshold=70
HealthMonitoring__SystemResources__MemoryCriticalThreshold=90
HealthMonitoring__SystemResources__DiskWarningThreshold=80
HealthMonitoring__SystemResources__DiskCriticalThreshold=95
HealthMonitoring__SystemResources__ThreadCountThreshold=500
HealthMonitoring__SystemResources__HandleCountThreshold=10000
HealthMonitoring__SystemResources__DiskPath=/

# ===========================================
# Security Configuration
# ===========================================
# Admin API Security
CONDUIT_ADMIN_RATE_LIMITING_ENABLED=true
CONDUIT_ADMIN_RATE_LIMITING_MAX_REQUESTS=100
CONDUIT_ADMIN_RATE_LIMITING_WINDOW_SECONDS=60
CONDUIT_ADMIN_IP_FILTERING_ENABLED=false
CONDUIT_ADMIN_IP_BANNING_ENABLED=false
CONDUIT_ADMIN_FAILED_AUTH_MAX_ATTEMPTS=5
CONDUIT_ADMIN_FAILED_AUTH_BAN_DURATION_MINUTES=30

# Core API Security
CONDUIT_CORE_RATE_LIMITING_ENABLED=true
CONDUIT_CORE_IP_FILTERING_ENABLED=false
CONDUIT_CORE_SECURITY_HEADERS_ENABLED=true

# ===========================================
# WebUI Configuration (Next.js)
# ===========================================
NODE_ENV=production
PORT=3000
NEXT_TELEMETRY_DISABLED=1

# Clerk Authentication (replace with your keys)
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=pk_test_your-key-here
CLERK_SECRET_KEY=sk_test_your-secret-here

# ===========================================
# Development Environment Overrides
# ===========================================
# Set these for development mode
# ASPNETCORE_ENVIRONMENT=Development
# NODE_ENV=development
# WATCHPACK_POLLING=true
# CHOKIDAR_USEPOLLING=true
# CHOKIDAR_INTERVAL=1000
# FAST_REFRESH=true

# ===========================================
# Provider Credentials (Examples)
# ===========================================
# These should be configured via Admin API, not environment variables
# Shown here for documentation purposes only
#
# OpenAI
# OPENAI_API_KEY=sk-...
# 
# Anthropic
# ANTHROPIC_API_KEY=sk-ant-...
#
# Azure OpenAI
# AZURE_OPENAI_API_KEY=...
# AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com/
#
# Add other providers as needed