"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[5744],{8453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>t});var s=i(6540);const r={},c=s.createContext(r);function a(e){const n=s.useContext(c);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),s.createElement(c.Provider,{value:n},e.children)}},8719:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>t,default:()=>h,frontMatter:()=>a,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"guides/cache-configuration","title":"Cache Configuration","description":"Learn how to configure and optimize caching in Conduit","source":"@site/docs/guides/cache-configuration.md","sourceDirName":"guides","slug":"/guides/cache-configuration","permalink":"/Conduit/docs/guides/cache-configuration","draft":false,"unlisted":false,"editUrl":"https://github.com/knnlabs/Conduit/tree/main/website/docs/guides/cache-configuration.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"Cache Configuration","description":"Learn how to configure and optimize caching in Conduit"},"sidebar":"docsSidebar","previous":{"title":"Environment Variables","permalink":"/Conduit/docs/guides/environment-variables"},"next":{"title":"Budget Management","permalink":"/Conduit/docs/guides/budget-management"}}');var r=i(4848),c=i(8453);const a={sidebar_position:2,title:"Cache Configuration",description:"Learn how to configure and optimize caching in Conduit"},t="Cache Configuration",l={},o=[{value:"Why Use Caching?",id:"why-use-caching",level:2},{value:"Caching Providers",id:"caching-providers",level:2},{value:"In-Memory Cache",id:"in-memory-cache",level:3},{value:"Redis Cache",id:"redis-cache",level:3},{value:"Configuring Caching",id:"configuring-caching",level:2},{value:"Via Web UI",id:"via-web-ui",level:3},{value:"Via Environment Variables",id:"via-environment-variables",level:3},{value:"Cache Control",id:"cache-control",level:2},{value:"Request-Level Cache Control",id:"request-level-cache-control",level:3},{value:"Response Headers",id:"response-headers",level:3},{value:"Cache Keys",id:"cache-keys",level:2},{value:"Cache Management",id:"cache-management",level:2},{value:"Monitoring Cache Performance",id:"monitoring-cache-performance",level:3},{value:"Clearing the Cache",id:"clearing-the-cache",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Next Steps",id:"next-steps",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,c.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"cache-configuration",children:"Cache Configuration"})}),"\n",(0,r.jsx)(n.p,{children:"Conduit includes a powerful caching system that can significantly reduce costs and improve response times by storing and reusing LLM responses for identical requests."}),"\n",(0,r.jsx)(n.h2,{id:"why-use-caching",children:"Why Use Caching?"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Cost Reduction"}),": Avoid paying for repeated identical requests"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Reduced Latency"}),": Cached responses are returned instantly"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Improved Reliability"}),": Cached responses work even if providers are down"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Consistent Responses"}),": Ensures the same output for the same input"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"caching-providers",children:"Caching Providers"}),"\n",(0,r.jsx)(n.p,{children:"Conduit supports two caching providers:"}),"\n",(0,r.jsx)(n.h3,{id:"in-memory-cache",children:"In-Memory Cache"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Simple to set up, no additional dependencies"}),"\n",(0,r.jsx)(n.li,{children:"Stored in application memory"}),"\n",(0,r.jsx)(n.li,{children:"Lost when the application restarts"}),"\n",(0,r.jsx)(n.li,{children:"Limited by available RAM"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"redis-cache",children:"Redis Cache"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Persistent across application restarts"}),"\n",(0,r.jsx)(n.li,{children:"Shared across multiple Conduit instances"}),"\n",(0,r.jsx)(n.li,{children:"Higher capacity and better performance for production"}),"\n",(0,r.jsx)(n.li,{children:"Requires a Redis server"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"configuring-caching",children:"Configuring Caching"}),"\n",(0,r.jsx)(n.h3,{id:"via-web-ui",children:"Via Web UI"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Navigate to ",(0,r.jsx)(n.strong,{children:"Configuration > Caching"})]}),"\n",(0,r.jsx)(n.li,{children:"Enable caching by toggling the switch"}),"\n",(0,r.jsx)(n.li,{children:"Select the cache provider (In-Memory or Redis)"}),"\n",(0,r.jsxs)(n.li,{children:["Configure provider-specific settings:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"In-Memory"}),": Maximum cache size (MB)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Redis"}),": Connection string, password, etc."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"Set the default Time-To-Live (TTL) for cache entries"}),"\n",(0,r.jsx)(n.li,{children:"Save the configuration"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"via-environment-variables",children:"Via Environment Variables"}),"\n",(0,r.jsx)(n.p,{children:"For In-Memory cache:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"CONDUIT_CACHE_ENABLED=true\nCONDUIT_CACHE_TYPE=InMemory\nCONDUIT_CACHE_MAX_SIZE=1024\nCONDUIT_CACHE_TTL=3600\n"})}),"\n",(0,r.jsx)(n.p,{children:"For Redis cache:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"CONDUIT_CACHE_ENABLED=true\nCONDUIT_CACHE_TYPE=Redis\nCONDUIT_REDIS_CONNECTION=redis:6379,password=your-password\nCONDUIT_CACHE_TTL=3600\n"})}),"\n",(0,r.jsx)(n.h2,{id:"cache-control",children:"Cache Control"}),"\n",(0,r.jsx)(n.h3,{id:"request-level-cache-control",children:"Request-Level Cache Control"}),"\n",(0,r.jsx)(n.p,{children:"You can control caching behavior at the request level:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "model": "my-gpt4",\n  "messages": [{"role": "user", "content": "Hello!"}],\n  "cache_control": {\n    "no_cache": false,\n    "ttl": 7200\n  }\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"cache_control"})," object supports:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"no_cache"}),": Set to ",(0,r.jsx)(n.code,{children:"true"})," to bypass the cache"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"ttl"}),": Override the default TTL in seconds"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"response-headers",children:"Response Headers"}),"\n",(0,r.jsx)(n.p,{children:"Conduit includes cache-related headers in responses:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"X-Cache"}),": ",(0,r.jsx)(n.code,{children:"HIT"})," or ",(0,r.jsx)(n.code,{children:"MISS"})," indicating cache status"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"X-Cache-Key"}),": The hash key used for the cache (if debugging is enabled)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"X-Cache-TTL"}),": Remaining TTL in seconds (for cache hits)"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"cache-keys",children:"Cache Keys"}),"\n",(0,r.jsx)(n.p,{children:"Conduit generates cache keys based on:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"The model requested"}),"\n",(0,r.jsx)(n.li,{children:"The complete messages array"}),"\n",(0,r.jsx)(n.li,{children:"Selected request parameters that affect the output"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Parameters like temperature, top_p, and max_tokens are included in the cache key since they affect the response, while parameters like stream or user are excluded."}),"\n",(0,r.jsx)(n.h2,{id:"cache-management",children:"Cache Management"}),"\n",(0,r.jsx)(n.h3,{id:"monitoring-cache-performance",children:"Monitoring Cache Performance"}),"\n",(0,r.jsx)(n.p,{children:"The Web UI provides cache performance metrics:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Navigate to ",(0,r.jsx)(n.strong,{children:"Dashboard > Cache"})]}),"\n",(0,r.jsxs)(n.li,{children:["View statistics:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Hit rate"}),"\n",(0,r.jsx)(n.li,{children:"Miss rate"}),"\n",(0,r.jsx)(n.li,{children:"Item count"}),"\n",(0,r.jsx)(n.li,{children:"Memory usage"}),"\n",(0,r.jsx)(n.li,{children:"Average response time savings"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"clearing-the-cache",children:"Clearing the Cache"}),"\n",(0,r.jsx)(n.p,{children:"You can clear the cache via the Web UI:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Navigate to ",(0,r.jsx)(n.strong,{children:"Configuration > Caching"})]}),"\n",(0,r.jsxs)(n.li,{children:["Click ",(0,r.jsx)(n.strong,{children:"Clear Cache"})]}),"\n",(0,r.jsx)(n.li,{children:"Confirm the action"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Or via API:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl -X POST http://localhost:5000/admin/cache/clear \\\n  -H "Authorization: Bearer your-master-key"\n'})}),"\n",(0,r.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Set Appropriate TTLs"}),": Balance freshness vs. performance"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Use Redis in Production"}),": For persistence and scaling"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Enable for High-Volume Endpoints"}),": Focus on frequently repeated requests"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Monitor Cache Performance"}),": Adjust settings based on hit rates"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Consider Disabling for Critical Requests"}),": When absolute freshness is required"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Learn about ",(0,r.jsx)(n.a,{href:"budget-management",children:"Budget Management"})," for cost control"]}),"\n",(0,r.jsxs)(n.li,{children:["Explore ",(0,r.jsx)(n.a,{href:"environment-variables",children:"Environment Variables"})," for deployment configuration"]}),"\n",(0,r.jsxs)(n.li,{children:["See the ",(0,r.jsx)(n.a,{href:"webui-usage",children:"WebUI Guide"})," for UI-based configuration"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);