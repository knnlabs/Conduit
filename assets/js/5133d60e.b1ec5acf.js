"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[268],{5244:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"troubleshooting/common-issues","title":"Common Issues","description":"Solutions for common issues when using Conduit","source":"@site/docs/troubleshooting/common-issues.md","sourceDirName":"troubleshooting","slug":"/troubleshooting/common-issues","permalink":"/conduit/docs/troubleshooting/common-issues","draft":false,"unlisted":false,"editUrl":"https://github.com/knnlabs/conduit/tree/main/website/docs/troubleshooting/common-issues.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"Common Issues","description":"Solutions for common issues when using Conduit"},"sidebar":"docsSidebar","previous":{"title":"Repository Pattern","permalink":"/conduit/docs/architecture/repository-pattern"},"next":{"title":"FAQ","permalink":"/conduit/docs/troubleshooting/faq"}}');var r=s(4848),o=s(8453);const t={sidebar_position:1,title:"Common Issues",description:"Solutions for common issues when using Conduit"},l="Common Issues",c={},d=[{value:"Installation Issues",id:"installation-issues",level:2},{value:"Docker Compose Fails to Start",id:"docker-compose-fails-to-start",level:3},{value:"Database Migration Errors",id:"database-migration-errors",level:3},{value:"Authentication Issues",id:"authentication-issues",level:2},{value:"Invalid Master Key",id:"invalid-master-key",level:3},{value:"Virtual Key Authentication Fails",id:"virtual-key-authentication-fails",level:3},{value:"Provider Connectivity Issues",id:"provider-connectivity-issues",level:2},{value:"Provider Connection Failed",id:"provider-connection-failed",level:3},{value:"Model Not Found",id:"model-not-found",level:3},{value:"Performance Issues",id:"performance-issues",level:2},{value:"High Latency",id:"high-latency",level:3},{value:"Memory Usage",id:"memory-usage",level:3},{value:"Routing Issues",id:"routing-issues",level:2},{value:"Unexpected Provider Selection",id:"unexpected-provider-selection",level:3},{value:"Fallback Not Working",id:"fallback-not-working",level:3},{value:"Logging and Monitoring Issues",id:"logging-and-monitoring-issues",level:2},{value:"Missing Request Logs",id:"missing-request-logs",level:3},{value:"Inaccurate Cost Reporting",id:"inaccurate-cost-reporting",level:3},{value:"Caching Issues",id:"caching-issues",level:2},{value:"Cache Not Working",id:"cache-not-working",level:3},{value:"Redis Connection Issues",id:"redis-connection-issues",level:3},{value:"Advanced Troubleshooting",id:"advanced-troubleshooting",level:2},{value:"Viewing Detailed Logs",id:"viewing-detailed-logs",level:3},{value:"Debugging Network Issues",id:"debugging-network-issues",level:3},{value:"Database Inspection",id:"database-inspection",level:3},{value:"Checking System Resources",id:"checking-system-resources",level:3},{value:"Getting Additional Help",id:"getting-additional-help",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"common-issues",children:"Common Issues"})}),"\n",(0,r.jsx)(n.p,{children:"This guide covers common issues you might encounter when using Conduit and provides troubleshooting steps to resolve them."}),"\n",(0,r.jsx)(n.h2,{id:"installation-issues",children:"Installation Issues"}),"\n",(0,r.jsx)(n.h3,{id:"docker-compose-fails-to-start",children:"Docker Compose Fails to Start"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Issue"}),": Docker Compose fails with permission errors or port conflicts."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Check if the ports (5000, 5001, 6379) are already in use:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo lsof -i :5000,5001,6379\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Ensure your user has permission to use Docker:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo usermod -aG docker $USER\n# Log out and back in for changes to take effect\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Check Docker Compose logs for specific errors:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker compose logs\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"database-migration-errors",children:"Database Migration Errors"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Issue"}),": Conduit fails to start with database migration errors."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Check if the database file is accessible and the location has write permissions"}),"\n",(0,r.jsxs)(n.li,{children:["Try resetting the database (backup any important data first):","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"rm -f /path/to/conduit.db\ndocker compose up -d\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Manually run migrations:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"dotnet ef database update --project ConduitLLM.Configuration\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"authentication-issues",children:"Authentication Issues"}),"\n",(0,r.jsx)(n.h3,{id:"invalid-master-key",children:"Invalid Master Key"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Issue"}),": Cannot log in to the Web UI with the master key."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Verify the master key in your configuration:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Check your .env file or environment variables\ncat .env | grep MASTER_KEY\n"})}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"Ensure there are no whitespace or special characters in the key"}),"\n",(0,r.jsx)(n.li,{children:"Reset the master key by updating the environment variable and restarting Conduit"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"virtual-key-authentication-fails",children:"Virtual Key Authentication Fails"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Issue"}),": API requests return 401 Unauthorized when using a virtual key."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Verify the virtual key format (should start with ",(0,r.jsx)(n.code,{children:"condt_"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:["Check if the key is active in the Web UI under ",(0,r.jsx)(n.strong,{children:"Virtual Keys"})]}),"\n",(0,r.jsx)(n.li,{children:"Ensure the key has the necessary permissions for the requested operation"}),"\n",(0,r.jsx)(n.li,{children:"Check for rate limit issues (429 responses)"}),"\n",(0,r.jsxs)(n.li,{children:["Verify the Authorization header format: ",(0,r.jsx)(n.code,{children:"Authorization: Bearer condt_your_key"})]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"provider-connectivity-issues",children:"Provider Connectivity Issues"}),"\n",(0,r.jsx)(n.h3,{id:"provider-connection-failed",children:"Provider Connection Failed"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Issue"}),": Errors when trying to connect to an LLM provider."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Verify the provider credentials in the Web UI under ",(0,r.jsx)(n.strong,{children:"Configuration > Provider Credentials"})]}),"\n",(0,r.jsxs)(n.li,{children:["Test the connection using the ",(0,r.jsx)(n.strong,{children:"Test Connection"})," button"]}),"\n",(0,r.jsx)(n.li,{children:"Check if you're using the correct API key format for the provider"}),"\n",(0,r.jsx)(n.li,{children:"Verify network connectivity to the provider's API endpoint"}),"\n",(0,r.jsx)(n.li,{children:"Check if the provider is experiencing an outage on their status page"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"model-not-found",children:"Model Not Found"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Issue"}),": Model not found errors when making requests."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Verify that the model name exists in your model mappings"}),"\n",(0,r.jsx)(n.li,{children:"Check that the underlying provider model is correct"}),"\n",(0,r.jsx)(n.li,{children:"Ensure the provider supports the requested model"}),"\n",(0,r.jsx)(n.li,{children:"Check if the virtual key has permission to access the model"}),"\n",(0,r.jsx)(n.li,{children:"Verify the model is properly configured in the routing settings"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"performance-issues",children:"Performance Issues"}),"\n",(0,r.jsx)(n.h3,{id:"high-latency",children:"High Latency"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Issue"}),": Requests take too long to complete."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Enable caching to improve response times for repeated requests"}),"\n",(0,r.jsx)(n.li,{children:"Check network latency between Conduit and LLM providers"}),"\n",(0,r.jsxs)(n.li,{children:["Monitor provider-specific latency in the ",(0,r.jsx)(n.strong,{children:"Provider Health"})," dashboard"]}),"\n",(0,r.jsx)(n.li,{children:"Consider using faster models or providers for time-sensitive operations"}),"\n",(0,r.jsx)(n.li,{children:"Implement query optimization techniques like prompt compression"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"memory-usage",children:"Memory Usage"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Issue"}),": High memory usage causing performance issues."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"If using Redis cache, check Redis memory settings"}),"\n",(0,r.jsx)(n.li,{children:"For in-memory cache, adjust the maximum cache size"}),"\n",(0,r.jsx)(n.li,{children:"Set appropriate lifecycle management for database connections"}),"\n",(0,r.jsx)(n.li,{children:"Check for memory leaks in logs"}),"\n",(0,r.jsx)(n.li,{children:"Increase container memory limits if necessary"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"routing-issues",children:"Routing Issues"}),"\n",(0,r.jsx)(n.h3,{id:"unexpected-provider-selection",children:"Unexpected Provider Selection"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Issue"}),": Requests are routed to unexpected providers."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Check your routing strategy configuration under ",(0,r.jsx)(n.strong,{children:"Configuration > Routing"})]}),"\n",(0,r.jsx)(n.li,{children:"Review model mapping priorities"}),"\n",(0,r.jsx)(n.li,{children:"For Least Cost routing, verify model costs are correctly defined"}),"\n",(0,r.jsx)(n.li,{children:"For Round Robin routing, check the distribution pattern over multiple requests"}),"\n",(0,r.jsxs)(n.li,{children:["Use request-level routing overrides for testing:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "routing": {\n    "provider_override": "specific_provider"\n  }\n}\n'})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"fallback-not-working",children:"Fallback Not Working"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Issue"}),": Requests fail without falling back to alternative providers."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Verify fallback is enabled in the routing configuration"}),"\n",(0,r.jsx)(n.li,{children:"Check fallback rules for the specific model"}),"\n",(0,r.jsx)(n.li,{children:"Ensure the fallback provider is properly configured"}),"\n",(0,r.jsx)(n.li,{children:"Review error conditions that trigger fallbacks"}),"\n",(0,r.jsx)(n.li,{children:"Check logs for fallback attempts and failures"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"logging-and-monitoring-issues",children:"Logging and Monitoring Issues"}),"\n",(0,r.jsx)(n.h3,{id:"missing-request-logs",children:"Missing Request Logs"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Issue"}),": Request logs are not visible in the dashboard."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Verify logging is enabled in the configuration"}),"\n",(0,r.jsx)(n.li,{children:"Check database permissions for log writing"}),"\n",(0,r.jsx)(n.li,{children:"Ensure log retention settings are appropriate"}),"\n",(0,r.jsx)(n.li,{children:"Try filtering logs with different parameters"}),"\n",(0,r.jsx)(n.li,{children:"Check for log processing errors in the application logs"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"inaccurate-cost-reporting",children:"Inaccurate Cost Reporting"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Issue"}),": Cost reports show incorrect or missing data."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Verify model costs are correctly defined"}),"\n",(0,r.jsx)(n.li,{children:"Check token counting precision and algorithms"}),"\n",(0,r.jsx)(n.li,{children:"Ensure all requests are being logged correctly"}),"\n",(0,r.jsx)(n.li,{children:"Verify the date range for cost reports"}),"\n",(0,r.jsx)(n.li,{children:"Update provider-specific token counting methods if necessary"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"caching-issues",children:"Caching Issues"}),"\n",(0,r.jsx)(n.h3,{id:"cache-not-working",children:"Cache Not Working"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Issue"}),": Responses are not being cached or cache hits are not happening."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Verify caching is enabled in ",(0,r.jsx)(n.strong,{children:"Configuration > Caching"})]}),"\n",(0,r.jsx)(n.li,{children:"Check cache configuration (provider, TTL, etc.)"}),"\n",(0,r.jsx)(n.li,{children:"For Redis cache, verify Redis connection"}),"\n",(0,r.jsx)(n.li,{children:"Check if no_cache flag is being set in requests"}),"\n",(0,r.jsx)(n.li,{children:"Verify cache key generation for complex requests"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"redis-connection-issues",children:"Redis Connection Issues"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Issue"}),": Cannot connect to Redis for caching."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Verify Redis connection string in the configuration"}),"\n",(0,r.jsxs)(n.li,{children:["Check if Redis server is running:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker compose exec redis redis-cli ping\n"})}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"Check for Redis authentication issues"}),"\n",(0,r.jsx)(n.li,{children:"Verify network connectivity to Redis server"}),"\n",(0,r.jsx)(n.li,{children:"Check Redis memory and performance"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"advanced-troubleshooting",children:"Advanced Troubleshooting"}),"\n",(0,r.jsx)(n.h3,{id:"viewing-detailed-logs",children:"Viewing Detailed Logs"}),"\n",(0,r.jsx)(n.p,{children:"For more detailed troubleshooting, check the application logs:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# For Docker deployments\ndocker compose logs conduit-api --tail=100\n\n# For direct deployments\ntail -f logs/conduit.log\n"})}),"\n",(0,r.jsx)(n.h3,{id:"debugging-network-issues",children:"Debugging Network Issues"}),"\n",(0,r.jsx)(n.p,{children:"To troubleshoot connectivity issues:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Test connectivity to a provider API\ncurl -v https://api.openai.com/v1/models \\\n  -H "Authorization: Bearer your_api_key"\n\n# Check for network issues\nping api.openai.com\ntraceroute api.openai.com\n'})}),"\n",(0,r.jsx)(n.h3,{id:"database-inspection",children:"Database Inspection"}),"\n",(0,r.jsx)(n.p,{children:"For database issues, you can inspect the SQLite database:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Install SQLite\nsudo apt-get install sqlite3\n\n# Open the database\nsqlite3 /path/to/conduit.db\n\n# View tables\n.tables\n\n# Query specific data\nSELECT * FROM VirtualKeys LIMIT 10;\n"})}),"\n",(0,r.jsx)(n.h3,{id:"checking-system-resources",children:"Checking System Resources"}),"\n",(0,r.jsx)(n.p,{children:"If experiencing performance issues:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Check system resources\nhtop\n\n# Check disk usage\ndf -h\n\n# Check Docker resource usage\ndocker stats\n"})}),"\n",(0,r.jsx)(n.h2,{id:"getting-additional-help",children:"Getting Additional Help"}),"\n",(0,r.jsx)(n.p,{children:"If you're still experiencing issues:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Check the ",(0,r.jsx)(n.a,{href:"faq",children:"FAQ"})," for additional guidance"]}),"\n",(0,r.jsxs)(n.li,{children:["Search the ",(0,r.jsx)(n.a,{href:"https://github.com/knnlabs/conduit/issues",children:"GitHub Issues"})," for similar problems"]}),"\n",(0,r.jsxs)(n.li,{children:["Review recent changes in the ",(0,r.jsx)(n.a,{href:"https://github.com/knnlabs/conduit/releases",children:"Release Notes"})]}),"\n",(0,r.jsx)(n.li,{children:"Open a new issue with detailed information about your problem"}),"\n",(0,r.jsx)(n.li,{children:"Join the community discussion forums for help from other users"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>l});var i=s(6540);const r={},o=i.createContext(r);function t(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);