"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[9610],{6176:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>t,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"deployment/single-instance","title":"Single Instance Deployment","description":"Deploy Conduit as a single instance for development and small-scale production","source":"@site/docs/deployment/single-instance.md","sourceDirName":"deployment","slug":"/deployment/single-instance","permalink":"/Conduit/docs/deployment/single-instance","draft":false,"unlisted":false,"editUrl":"https://github.com/knnlabs/Conduit/tree/main/website/docs/deployment/single-instance.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"Single Instance Deployment","description":"Deploy Conduit as a single instance for development and small-scale production"}}');var o=i(4848),r=i(8453);const l={sidebar_position:1,title:"Single Instance Deployment",description:"Deploy Conduit as a single instance for development and small-scale production"},t="Single Instance Deployment",a={},c=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Quick Start",id:"quick-start",level:2},{value:"1. Clone and Setup",id:"1-clone-and-setup",level:3},{value:"2. Configure Environment",id:"2-configure-environment",level:3},{value:"3. Start Services",id:"3-start-services",level:3},{value:"Service Architecture",id:"service-architecture",level:2},{value:"Core API (Port 5000)",id:"core-api-port-5000",level:3},{value:"Admin API (Port 5002)",id:"admin-api-port-5002",level:3},{value:"WebUI (Port 5001)",id:"webui-port-5001",level:3},{value:"Initial Configuration",id:"initial-configuration",level:2},{value:"1. Access Admin Dashboard",id:"1-access-admin-dashboard",level:3},{value:"2. Add Provider Credentials",id:"2-add-provider-credentials",level:3},{value:"3. Create Virtual Keys",id:"3-create-virtual-keys",level:3},{value:"4. Test the API",id:"4-test-the-api",level:3},{value:"Storage Configuration",id:"storage-configuration",level:2},{value:"In-Memory Storage (Default)",id:"in-memory-storage-default",level:3},{value:"S3-Compatible Storage",id:"s3-compatible-storage",level:3},{value:"Performance Tuning",id:"performance-tuning",level:2},{value:"Database Connection Pooling",id:"database-connection-pooling",level:3},{value:"Redis Configuration",id:"redis-configuration",level:3},{value:"Monitoring and Health Checks",id:"monitoring-and-health-checks",level:2},{value:"Health Endpoints",id:"health-endpoints",level:3},{value:"Log Monitoring",id:"log-monitoring",level:3},{value:"Backup and Recovery",id:"backup-and-recovery",level:2},{value:"Database Backup",id:"database-backup",level:3},{value:"Configuration Export",id:"configuration-export",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Common Issues",id:"common-issues",level:3},{value:"Log Analysis",id:"log-analysis",level:3},{value:"Scaling Considerations",id:"scaling-considerations",level:2},{value:"When to Scale Up",id:"when-to-scale-up",level:3},{value:"Signs You Need Multi-Instance",id:"signs-you-need-multi-instance",level:3},{value:"Security Considerations",id:"security-considerations",level:2},{value:"Network Security",id:"network-security",level:3},{value:"API Key Security",id:"api-key-security",level:3},{value:"Next Steps",id:"next-steps",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"single-instance-deployment",children:"Single Instance Deployment"})}),"\n",(0,o.jsx)(n.p,{children:"This guide covers deploying Conduit as a single instance using Docker Compose, suitable for development environments and small-scale production deployments."}),"\n",(0,o.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Docker and Docker Compose installed"}),"\n",(0,o.jsx)(n.li,{children:"PostgreSQL database (local or remote)"}),"\n",(0,o.jsx)(n.li,{children:"Basic understanding of environment variables"}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,o.jsx)(n.h3,{id:"1-clone-and-setup",children:"1. Clone and Setup"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"git clone https://github.com/knnlabs/conduit.git\ncd conduit\n"})}),"\n",(0,o.jsx)(n.h3,{id:"2-configure-environment",children:"2. Configure Environment"}),"\n",(0,o.jsxs)(n.p,{children:["Create a ",(0,o.jsx)(n.code,{children:".env"})," file in the project root:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Database Configuration\nDATABASE_URL=postgresql://username:password@localhost:5432/conduit_db\n\n# Redis Configuration (optional for caching)\nREDIS_URL=redis://localhost:6379/0\n\n# Master Key for Admin Access\nCONDUITLLM__MASTERKEY=your-secure-master-key-here\n\n# CORS Configuration\nCONDUITLLM__CORS__ALLOWEDORIGINS=http://localhost:3000,http://localhost:5001\n\n# Logging Configuration\nCONDUITLLM__LOGGING__LOGLEVEL=Information\n"})}),"\n",(0,o.jsx)(n.h3,{id:"3-start-services",children:"3. Start Services"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Start all services\ndocker compose up -d\n\n# View logs\ndocker compose logs -f\n\n# Check service status\ndocker compose ps\n"})}),"\n",(0,o.jsx)(n.p,{children:"This starts:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Core API"})," on port 5000"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Admin API"})," on port 5002"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"WebUI"})," on port 5001"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"PostgreSQL"})," on port 5432"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Redis"})," on port 6379"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"service-architecture",children:"Service Architecture"}),"\n",(0,o.jsx)(n.h3,{id:"core-api-port-5000",children:"Core API (Port 5000)"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Handles all LLM requests"}),"\n",(0,o.jsx)(n.li,{children:"OpenAI-compatible endpoints"}),"\n",(0,o.jsx)(n.li,{children:"Virtual key authentication"}),"\n",(0,o.jsx)(n.li,{children:"Provider routing and communication"}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"admin-api-port-5002",children:"Admin API (Port 5002)"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Administrative operations"}),"\n",(0,o.jsx)(n.li,{children:"Virtual key management"}),"\n",(0,o.jsx)(n.li,{children:"Provider configuration"}),"\n",(0,o.jsx)(n.li,{children:"Usage analytics"}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"webui-port-5001",children:"WebUI (Port 5001)"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Administrative dashboard"}),"\n",(0,o.jsx)(n.li,{children:"Real-time monitoring"}),"\n",(0,o.jsx)(n.li,{children:"Configuration management"}),"\n",(0,o.jsx)(n.li,{children:"Usage analytics"}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"initial-configuration",children:"Initial Configuration"}),"\n",(0,o.jsx)(n.h3,{id:"1-access-admin-dashboard",children:"1. Access Admin Dashboard"}),"\n",(0,o.jsxs)(n.p,{children:["Navigate to ",(0,o.jsx)(n.code,{children:"http://localhost:5001"})," and log in with your master key."]}),"\n",(0,o.jsx)(n.h3,{id:"2-add-provider-credentials",children:"2. Add Provider Credentials"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["Go to ",(0,o.jsx)(n.strong,{children:"Configuration > Provider Credentials"})]}),"\n",(0,o.jsxs)(n.li,{children:["Click ",(0,o.jsx)(n.strong,{children:"Add Provider Credential"})]}),"\n",(0,o.jsx)(n.li,{children:"Select your provider (e.g., OpenAI, Anthropic)"}),"\n",(0,o.jsx)(n.li,{children:"Enter API credentials"}),"\n",(0,o.jsxs)(n.li,{children:["Click ",(0,o.jsx)(n.strong,{children:"Save"})]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"3-create-virtual-keys",children:"3. Create Virtual Keys"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["Navigate to ",(0,o.jsx)(n.strong,{children:"Virtual Keys"})]}),"\n",(0,o.jsxs)(n.li,{children:["Click ",(0,o.jsx)(n.strong,{children:"Create New Key"})]}),"\n",(0,o.jsx)(n.li,{children:"Configure permissions and limits"}),"\n",(0,o.jsx)(n.li,{children:"Save and copy the generated key"}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"4-test-the-api",children:"4. Test the API"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:'curl http://localhost:5000/v1/chat/completions \\\n  -H "Content-Type: application/json" \\\n  -H "Authorization: Bearer condt_your_virtual_key" \\\n  -d \'{\n    "model": "gpt-3.5-turbo",\n    "messages": [{"role": "user", "content": "Hello from Conduit!"}]\n  }\'\n'})}),"\n",(0,o.jsx)(n.h2,{id:"storage-configuration",children:"Storage Configuration"}),"\n",(0,o.jsx)(n.h3,{id:"in-memory-storage-default",children:"In-Memory Storage (Default)"}),"\n",(0,o.jsx)(n.p,{children:"Perfect for development and testing:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# No additional configuration needed\n# Media files stored in memory\n"})}),"\n",(0,o.jsx)(n.h3,{id:"s3-compatible-storage",children:"S3-Compatible Storage"}),"\n",(0,o.jsx)(n.p,{children:"For production deployments:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Storage Configuration\nCONDUITLLM__STORAGE__PROVIDER=S3\nCONDUITLLM__STORAGE__S3__SERVICEURL=https://your-s3-endpoint.com\nCONDUITLLM__STORAGE__S3__ACCESSKEY=your-access-key\nCONDUITLLM__STORAGE__S3__SECRETKEY=your-secret-key\nCONDUITLLM__STORAGE__S3__BUCKETNAME=conduit-media\nCONDUITLLM__STORAGE__S3__REGION=us-east-1\n"})}),"\n",(0,o.jsx)(n.h2,{id:"performance-tuning",children:"Performance Tuning"}),"\n",(0,o.jsx)(n.h3,{id:"database-connection-pooling",children:"Database Connection Pooling"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# PostgreSQL Connection Pool\nCONDUITLLM__DATABASE__MAXPOOLSIZE=100\nCONDUITLLM__DATABASE__MINPOOLSIZE=5\nCONDUITLLM__DATABASE__CONNECTIONTIMEOUT=30\n"})}),"\n",(0,o.jsx)(n.h3,{id:"redis-configuration",children:"Redis Configuration"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Redis Connection Settings\nCONDUITLLM__REDIS__CONNECTIONSTRING=redis://localhost:6379/0\nCONDUITLLM__REDIS__COMMANDTIMEOUT=5000\nCONDUITLLM__REDIS__CONNECTTIMEOUT=5000\n"})}),"\n",(0,o.jsx)(n.h2,{id:"monitoring-and-health-checks",children:"Monitoring and Health Checks"}),"\n",(0,o.jsx)(n.h3,{id:"health-endpoints",children:"Health Endpoints"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Core API Health\ncurl http://localhost:5000/health\n\n# Admin API Health  \ncurl http://localhost:5002/health\n\n# Detailed Health Information\ncurl http://localhost:5000/health/ready\n"})}),"\n",(0,o.jsx)(n.h3,{id:"log-monitoring",children:"Log Monitoring"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# View real-time logs\ndocker compose logs -f conduit-api\n\n# View specific service logs\ndocker compose logs -f conduit-admin\ndocker compose logs -f conduit-webui\n"})}),"\n",(0,o.jsx)(n.h2,{id:"backup-and-recovery",children:"Backup and Recovery"}),"\n",(0,o.jsx)(n.h3,{id:"database-backup",children:"Database Backup"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Create database backup\ndocker exec -t conduit-postgres pg_dump -U conduit_user conduit_db > backup.sql\n\n# Restore database\ndocker exec -i conduit-postgres psql -U conduit_user conduit_db < backup.sql\n"})}),"\n",(0,o.jsx)(n.h3,{id:"configuration-export",children:"Configuration Export"}),"\n",(0,o.jsx)(n.p,{children:"Use the Admin API to export configuration:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:'curl -H "Authorization: Bearer your-master-key" \\\n  http://localhost:5002/api/admin/export/configuration > config-backup.json\n'})}),"\n",(0,o.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,o.jsx)(n.h3,{id:"common-issues",children:"Common Issues"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Service won't start:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:'# Check logs for errors\ndocker compose logs conduit-api\n\n# Verify database connection\ndocker compose exec conduit-postgres psql -U conduit_user -d conduit_db -c "SELECT 1;"\n'})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"API returns 500 errors:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Check database migrations\ndocker compose logs conduit-api | grep -i migration\n\n# Verify Redis connection\ndocker compose exec redis redis-cli ping\n"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"WebUI won't load:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Check CORS configuration\n# Verify CONDUITLLM__CORS__ALLOWEDORIGINS includes your domain\n"})}),"\n",(0,o.jsx)(n.h3,{id:"log-analysis",children:"Log Analysis"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:'# Search for errors\ndocker compose logs | grep -i error\n\n# Check authentication issues\ndocker compose logs | grep -i "unauthorized\\|forbidden"\n\n# Monitor performance\ndocker compose logs | grep -i "slow\\|timeout"\n'})}),"\n",(0,o.jsx)(n.h2,{id:"scaling-considerations",children:"Scaling Considerations"}),"\n",(0,o.jsx)(n.h3,{id:"when-to-scale-up",children:"When to Scale Up"}),"\n",(0,o.jsx)(n.p,{children:"Single instance deployment is suitable for:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Development and testing"}),"\n",(0,o.jsx)(n.li,{children:"Small teams (< 10 users)"}),"\n",(0,o.jsx)(n.li,{children:"Low to moderate traffic (< 100 requests/minute)"}),"\n",(0,o.jsx)(n.li,{children:"Budget-conscious deployments"}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"signs-you-need-multi-instance",children:"Signs You Need Multi-Instance"}),"\n",(0,o.jsxs)(n.p,{children:["Consider ",(0,o.jsx)(n.a,{href:"production-deployment",children:"Production Deployment"})," when you experience:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"High request volume (> 1000 requests/minute)"}),"\n",(0,o.jsx)(n.li,{children:"Multiple teams or departments"}),"\n",(0,o.jsx)(n.li,{children:"High availability requirements"}),"\n",(0,o.jsx)(n.li,{children:"Geographic distribution needs"}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"security-considerations",children:"Security Considerations"}),"\n",(0,o.jsx)(n.h3,{id:"network-security",children:"Network Security"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Bind to localhost only for development\nCONDUITLLM__KESTREL__ENDPOINTS__HTTP__URL=http://localhost:5000\n\n# Use HTTPS in production\nCONDUITLLM__KESTREL__ENDPOINTS__HTTPS__URL=https://0.0.0.0:5443\n"})}),"\n",(0,o.jsx)(n.h3,{id:"api-key-security",children:"API Key Security"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Use strong master keys (minimum 32 characters)"}),"\n",(0,o.jsx)(n.li,{children:"Rotate virtual keys regularly"}),"\n",(0,o.jsx)(n.li,{children:"Implement IP restrictions when possible"}),"\n",(0,o.jsx)(n.li,{children:"Monitor API usage for anomalies"}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Production Deployment"}),": Learn about ",(0,o.jsx)(n.a,{href:"production-deployment",children:"multi-instance deployment"})]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Scaling"}),": Configure ",(0,o.jsx)(n.a,{href:"scaling-configuration",children:"horizontal scaling"})]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Monitoring"}),": Set up ",(0,o.jsx)(n.a,{href:"monitoring-health",children:"comprehensive monitoring"})]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Administration"}),": Explore the ",(0,o.jsx)(n.a,{href:"../admin/admin-api-overview",children:"Admin API"})]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>t});var s=i(6540);const o={},r=s.createContext(o);function l(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:l(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);