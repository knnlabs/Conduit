@page "/request-logs"
@using ConduitLLM.WebUI.DTOs
@using System.Globalization
@using System.Text
@using Microsoft.AspNetCore.Components.Web
@using Microsoft.AspNetCore.Authorization
@using Microsoft.AspNetCore.Components
@using ConduitLLM.WebUI.Components.Shared
@using MudBlazor
@attribute [Authorize]
@inject HttpClient Http
@inject IJSRuntime JSRuntime
@rendermode InteractiveServer

<PageTitle>Request Logs - ConduitLLM</PageTitle>

<MudText Typo="Typo.h4" Class="mb-4">Request Logs</MudText>

<MudPaper Elevation="2" Class="pa-4 mb-4">
    <MudText Typo="Typo.h6" Class="mb-3">Filters</MudText>
    <MudGrid>
        <MudItem xs="12" md="3">
            <MudSelect T="string" Label="Virtual Key" Value="@selectedVirtualKeyId" Variant="Variant.Outlined" Margin="Margin.Dense" Class="mb-2">
                <MudSelectItem Value="@("")">All Keys</MudSelectItem>
            </MudSelect>
        </MudItem>
        <MudItem xs="12" md="3">
            <MudSelect T="string" Label="Model" Value="@selectedModel" Variant="Variant.Outlined" Margin="Margin.Dense" Class="mb-2">
                <MudSelectItem Value="@("")">All Models</MudSelectItem>
            </MudSelect>
        </MudItem>
        <MudItem xs="12" md="2">
            <MudSelect T="string" Label="Date Range" Value="@selectedDateRange" Variant="Variant.Outlined" Margin="Margin.Dense" Class="mb-2">
                <MudSelectItem Value="@("24h")">Last 24 Hours</MudSelectItem>
                <MudSelectItem Value="@("7d")">Last 7 Days</MudSelectItem>
                <MudSelectItem Value="@("30d")">Last 30 Days</MudSelectItem>
                <MudSelectItem Value="@("custom")">Custom Range</MudSelectItem>
            </MudSelect>
        </MudItem>
        <MudItem xs="12" md="2">
            <MudSelect T="string" Label="Status Code" Value="@selectedStatusCode" Variant="Variant.Outlined" Margin="Margin.Dense" Class="mb-2">
                <MudSelectItem Value="@("")">All</MudSelectItem>
                <MudSelectItem Value="@("200")">200 (Success)</MudSelectItem>
                <MudSelectItem Value="@("400")">400 (Bad Request)</MudSelectItem>
            </MudSelect>
        </MudItem>
        <MudItem xs="12" Class="d-flex justify-end">
            <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="ApplyFilters" Class="mr-2">Apply Filters</MudButton>
            <MudButton Variant="Variant.Outlined" Color="Color.Secondary" OnClick="ClearFilters">Clear Filters</MudButton>
        </MudItem>
    </MudGrid>
</MudPaper>

<MudText Typo="Typo.body1">No logs found. Please try adjusting your filters.</MudText>

@code {
    private string? selectedVirtualKeyId;
    private string? selectedModel;
    private string? selectedStatusCode;
    private string selectedDateRange = "24h";
    
    private Task ApplyFilters()
    {
        // Placeholder for filter application
        return Task.CompletedTask;
    }

    private Task ClearFilters()
    {
        selectedVirtualKeyId = null;
        selectedModel = null;
        selectedStatusCode = null;
        selectedDateRange = "24h";
        return Task.CompletedTask;
    }
}