@page "/request-logs"
@using ConduitLLM.WebUI.DTOs
@using System.Globalization
@using System.Text
@using Microsoft.AspNetCore.Components.Web
@using Microsoft.AspNetCore.Authorization
@using Microsoft.AspNetCore.Components
@using ConduitLLM.WebUI.Components.Shared
@attribute [Authorize]
@inject HttpClient Http
@inject IJSRuntime JSRuntime
@rendermode InteractiveServer

<PageTitle>Request Logs - ConduitLLM</PageTitle>

<h2 class="mb-4">Request Logs</h2>

<div class="card mb-4 shadow-sm">
    <div class="card-body p-4">
        <h5 class="mb-3">Filters</h5>
        <div class="row">
            <div class="col-12 col-md-3">
                <div class="form-group mb-2">
                    <label for="virtualKey">Virtual Key</label>
                    <select class="form-select" id="virtualKey" @bind="selectedVirtualKeyId">
                        <option value="">All Keys</option>
                    </select>
                </div>
            </div>
            <div class="col-12 col-md-3">
                <div class="form-group mb-2">
                    <label for="model">Model</label>
                    <select class="form-select" id="model" @bind="selectedModel">
                        <option value="">All Models</option>
                    </select>
                </div>
            </div>
            <div class="col-12 col-md-2">
                <div class="form-group mb-2">
                    <label for="dateRange">Date Range</label>
                    <select class="form-select" id="dateRange" @bind="selectedDateRange">
                        <option value="24h">Last 24 Hours</option>
                        <option value="7d">Last 7 Days</option>
                        <option value="30d">Last 30 Days</option>
                        <option value="custom">Custom Range</option>
                    </select>
                </div>
            </div>
            <div class="col-12 col-md-2">
                <div class="form-group mb-2">
                    <label for="statusCode">Status Code</label>
                    <select class="form-select" id="statusCode" @bind="selectedStatusCode">
                        <option value="">All</option>
                        <option value="200">200 (Success)</option>
                        <option value="400">400 (Bad Request)</option>
                    </select>
                </div>
            </div>
            <div class="col-12 mt-3 d-flex justify-content-end">
                <button type="button" class="btn btn-primary me-2" @onclick="ApplyFilters">Apply Filters</button>
                <button type="button" class="btn btn-outline-secondary" @onclick="ClearFilters">Clear Filters</button>
            </div>
        </div>
    </div>
</div>

<p class="text-muted">No logs found. Please try adjusting your filters.</p>

@code {
    private string? selectedVirtualKeyId;
    private string? selectedModel;
    private string? selectedStatusCode;
    private string selectedDateRange = "24h";
    
    private Task ApplyFilters()
    {
        // Placeholder for filter application
        return Task.CompletedTask;
    }

    private Task ClearFilters()
    {
        selectedVirtualKeyId = null;
        selectedModel = null;
        selectedStatusCode = null;
        selectedDateRange = "24h";
        return Task.CompletedTask;
    }
}